

# Is Context/Grafana Necessary?

[Context Documentation](https://allen.ingka.com/docs/default/component/context/faq/)

## Pros
- Setup process seems simple, but will still cost some time
- Recommended system

## Cons
- Risk of duplicated data (logs and tracing in ) and wasted
- Risks of sharing logging data, which may
  - Context docs explicitly says it shouldn't 
  - 
- Keeping secrets closest to where they're used is the rule, does it also apply to telemetry?
- How much is it used? May be difficult to get an esimate

## What does Context/Grafana Provide that isn't into Google Cloud?
What is OpenTelemetry? 
  - An open-source, vendor-neutral telemetry framework network
  - sends log, trace and metric data in a standardized format
  - this data is consistent across all tech stacks and, because it's vendor neutral, it prevents your application from being locked into a specific cloud or 
  - Libraries provided for all major tech stacks that allow you to 
    - instrument your applicatioin so that log, trace and metric is produced
    - library provides functions/methods to explicitly send custom data along with default data sent with instrumentation


https://cloud.google.com/learn/what-is-opentelemetry
https://docs.cloud.google.com/stackdriver/docs/instrumentation/overview


### Questions
**Difference between Observabilty vs Telemetry**
- telemetry is the data?
- observability is the practice?

**What does it take to configure tracing in google cloud?**
- [This article](https://docs.cloud.google.com/trace/docs/overview) mentions that applications can implement the [cloud trace API](https://docs.cloud.google.com/trace/docs/reference) to get tracing data for an application.
  - Note: applications running in Cloud Run already have tracing enabled [link](https://docs.cloud.google.com/trace/docs/overview#configurations_with_automatic_tracing)
- [Cloud Profiler](https://docs.cloud.google.com/profiler/docs) is a way to profile an application's performance.

**What does it take to configure _application_ metrics in google cloud?**


Documentation on instrumenting components. Why would you do that? 
* For systems like ours

https://docs.cloud.google.com/stackdriver/docs/instrumentation/overview


## Notes
GCP 
- logging: generated by default
- application metrics (not CPU, etc): 
  - same level of detail as in context?
- cloud run: enabled by default
- App Engine standard environment: Java 8, Python 2, and PHP 5 don't need client libraries
- create alerts
- configure slack

Context/Grafana
- client
  - instrumentation library added
  - configuration in app
  - [collector automatically created in cloud run]
- grafana
  - add dashboard
  - create alerts


## Conclusion
There are some potential benefits: 
- if there are a lot of teams/applications using context, it's central location where issues between applications or affecting multiple applications could be found
- Grafana has some advanced notification and dashboard features we could take advantage of.
- We're already onboarded, instrumenting and setting up a collector is not a lot of work and will allow us to compare vs google cloud.


### TO DO
- [ ] grab token from 
- reorg
- 


- [ ] [instrument cloud run applications](https://docs.cloud.google.com/stackdriver/docs/instrumentation/choose-approach#run)
- [ ] Create a ticket to create profilers for our apps? This may be 
  https://docs.cloud.google.com/profiler/docs


  - ticket for analysis
  - if we go with grafana
    - how to remove sensitive data from data sent to context
  - learn about and document
    - instrumentation
    - tracing in gcp
    - dashboards in gcp
    - profiling

  - create ticket to investigate how we filter out PII in context logs
    - don't send log data
    - we don't log PII